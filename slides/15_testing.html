<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Gergő Pintér, PhD">
  <title>testing</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../assets/reveal.js-5.2.1//dist/reset.css">
  <link rel="stylesheet" href="../assets/reveal.js-5.2.1//dist/reveal.css">
  <style>
    .reveal .sourceCode {  /* see #7635 */
      overflow: visible;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../assets/reveal.js-5.2.1//dist/theme/black.css" id="theme">
  <link rel="stylesheet" href="../assets/custom.css"/>
  <link rel="stylesheet" href="../assets/helpers.css"/>
  <!--<script src="../assets/reveal_menu/menu.js"></script>
  <link rel="stylesheet" href="../assets/reveal_menu/menu.css"/>

  <script src="../assets/verticator/verticator.js"></script>
  <link rel="stylesheet" href="../assets/verticator/verticator.css"/>-->

  <script src="../assets/reveal-drawer-0.1.2/drawer.js"></script>
  <link rel="stylesheet" href="../assets/reveal-drawer-0.1.2/drawer.css"/>

  <script src="../assets/highlight_line.js"></script>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#181d37" data-background-image="../assets/by-sa.svg" data-background-position="1.25rem
calc(100% - 1.25rem)" data-background-size="125px">
  <h1 class="title">testing</h1>
  <p class="author">Gergő Pintér, PhD</p>
  <p class="date">gergo.pinter@uni-corvinus.hu</p>
</section>

<section>
<section id="v-model-forsberg1991relationship"
class="title-slide slide level1">
<h1>V model <span class="citation"
data-cites="forsberg1991relationship">[1]</span></h1>
<div class="columns column-gapless text-smaller">
<div class="column mt-4" style="width:50%;">
<ul>
<li>each phase has output and a <em>review process</em>
<ul>
<li>errors are found at early stage</li>
<li>decreases the risk of failure</li>
</ul></li>
<li>testing is done in a hierarchical perspective</li>
<li>review is a testing process usually without executing the code</li>
</ul>
</div><div class="column" style="width:50%;">
<p><img data-src="figures/v_model_unit_testing.drawio.svg"
width="450" /></p>
</div>
</div>
<!-- https://lostechies.com/content/derekgreer/uploads/2011/03/TestDrivenDevelopment_thumb_107D31DD.png -->
</section>
<section id="test-pyramid" class="slide level2">
<h2>test pyramid</h2>
<div class="columns mt-3">
<div class="column" style="width:50%;">
<p><img data-src="figures/test_pyramid_ice_cream.drawio.svg"
width="500" /></p>
</div><div class="column fragment" data-fragment-index="1"
style="width:50%;">
<div class="r-stack">
<div class="fragment fade-out" data-fragment-index="2">
<p><img data-src="figures/test_pyramid_no_text.drawio.svg"
width="500" /></p>
</div>
<div class="fragment" data-fragment-index="2">
<p><img data-src="figures/test_pyramid.drawio.svg" width="500" /></p>
</div>
</div>
</div>
</div>
<div class="fragment text-size-1" data-fragment-index="2">
<p>the turtle and rabbit figures by <a
href="https://delapouite.com/">Delapouite</a> under <a
href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a> via <a
href="https://game-icons.net">game-icons.net</a></p>
</div>
</section></section>
<section>
<section id="what-is-a-unit-test" class="title-slide slide level1">
<h1>what is a unit test?</h1>
<div class="columns">
<div class="column" style="width:55%;">
<ul>
<li>what is a unit?
<ul>
<li>smallest testable part of a program</li>
<li>usually a method</li>
</ul></li>
<li>a unit test is another piece of code, that tests the given unit</li>
</ul>
</div><div class="column" style="width:45%;">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">&quot;&quot;&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">    &gt;&gt;&gt; fizzbuzz(3)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">    &#39;Fizz&#39;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co">    &gt;&gt;&gt; fizzbuzz(5)</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">    &#39;Buzz&#39;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">    &gt;&gt;&gt; fizzbuzz(15)</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">    &#39;FizzBuzz&#39;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">    &gt;&gt;&gt; fizzbuzz(17)</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">    &#39;17&#39;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">    &quot;&quot;&quot;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">15</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="bu">str</span>(i)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span></code></pre></div>
<p><span class="text-smaller">doctest in Python</span></p>
</div>
</div>
</section>
<section id="what-really-is-a-unit" class="slide level2">
<h2>what really is a unit?</h2>
<ul>
<li>defined as a <strong>single behaviour</strong> exhibited by the
system under test
<ul>
<li>usually corresponding to a requirement</li>
</ul></li>
<li>it may imply that it is a function or a module / method or a class
<ul>
<li>depending on the paradigm</li>
</ul></li>
<li>functions / methods, modules or classes don’t always correspond to
units</li>
<li>“only entry points to externally-visible system behaviours define
units”
<ul>
<li>by Kent Beck <span class="citation"
data-cites="beck2002test">[2]</span></li>
</ul></li>
</ul>
<!-- > Unit is defined as a single behaviour exhibited by the system under test, usually corresponding to a requirement.
> While it may imply that it is a function or a module (in procedural programming) or a method or a class (in object-oriented programming) **it does not mean functions/methods, modules or classes always correspond to units**.
> From the system-requirements perspective only the perimeter of the system is relevant, thus **only entry points to externally-visible system behaviours define units**.
>
> -- Kent Beck via Wikipedia-->
<div class="text-smaller">
<p>source: <span class="citation"
data-cites="enwiki:1249792515">[3]</span></p>
</div>
</section>
<section id="unit-vs-integration-testing" class="slide level2">
<h2>unit vs integration testing</h2>
<div class="wide-quote">
<blockquote>
<p>The terms ‘unit test’ and ‘integration test’ have always been rather
murky, even by the slippery standards of most software terminology.</p>
<p>– <a
href="https://martinfowler.com/articles/2021-test-shapes.html">Martin
Fowler</a> <span class="citation"
data-cites="fowler2021diverse">[4]</span></p>
</blockquote>
</div>
<div class="columns mt-3">
<div class="column" style="width:40%;">
<dl>
<dt>unit test</dt>
<dd>
tests a single behaviour
</dd>
</dl>
</div><div class="column" style="width:60%;">
<dl>
<dt>integration test</dt>
<dd>
test a set of units, working together
</dd>
</dl>
</div>
</div>
<div class="text-smaller mt-3">
<p>in most of my examples a unit will be represented by a method</p>
</div>
</section>
<section id="unit-test-example" class="slide level2">
<h2>unit test example</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><code>code/fizzbuzz.py</code></p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">15</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="bu">str</span>(i)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span></code></pre></div>
</div><div class="column" style="width:50%;">
<p><code>code/test_fizzbuzz.py</code></p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> fizzbuzz</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">10</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">12</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">15</span>) <span class="op">==</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">17</span>) <span class="op">==</span> <span class="st">&quot;17&quot;</span></span></code></pre></div>
</div>
</div>
</section>
<section id="arrange-act-assert-pattern" class="slide level2">
<h2>arrange, act, assert pattern</h2>
<p>parts of a unit test</p>
<div class="columns">
<div class="column" style="width:50%;">
<dl>
<dt>arrange</dt>
<dd>
set up the testing environment (e.g., create objects)
</dd>
<dt>act</dt>
<dd>
call the tested unit
</dd>
<dt>assert</dt>
<dd>
compare the result of the ‘act’ step to the expected value
</dd>
</dl>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># arrange</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    test_input <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># act</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> fizzbuzz(test_input)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># assert</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> result <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span></code></pre></div>
</div>
</div>
</section>
<section id="arrange-act-assert-annihilate-pattern"
class="slide level2">
<h2>arrange, act, assert(, annihilate) pattern</h2>
<p>parts of a unit test</p>
<dl>
<dt>arrange</dt>
<dd>
set up the testing environment
</dd>
<dd>
(e.g., create objects)
</dd>
<dt>act</dt>
<dd>
call the tested unit
</dd>
<dt>assert</dt>
<dd>
compare the result of the ‘act’ step to the expected value
</dd>
<dt>annihilate</dt>
<dd>
free resources
</dd>
<dd>
automatic in modern languages
</dd>
</dl>
</section></section>
<section>
<section id="how-to-unit-test-this-funciton"
class="title-slide slide level1">
<h1>how to unit test this funciton?</h1>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> query_progress(user_id: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># establish database connection</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    con <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">&quot;data.db&quot;</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># build query</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    progress_query <span class="op">=</span> <span class="ss">f&quot;&quot;&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="ss">    SELECT</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="ss">        lesson / 50.0 AS progress</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="ss">    FROM activity</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="ss">    WHERE</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="ss">        user_id = </span><span class="sc">{</span>user_id<span class="sc">}</span><span class="ss"> AND</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="ss">        result = &#39;success&#39;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="ss">    ORDER BY</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="ss">        lesson DESC</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="ss">    LIMIT 1</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="ss">    ;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="ss">    &quot;&quot;&quot;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># execute query</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> con.execute(progress_query)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    progress <span class="op">=</span> res.fetchone()[<span class="dv">0</span>]</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> progress</span></code></pre></div>
</div><div class="column fragment mt-1" style="width:50%;">
<ul>
<li>short answer: you can’t</li>
<li>because it is not a unit
<ul>
<li>it does 3 things</li>
</ul></li>
<li>single responsibility principle makes unit testing easier</li>
<li>a ‘stable’ database would be needed for testing
<ul>
<li>if the DB content changed, the expected value would become
obsolete</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="separate-business-logic-from-persistence"
class="slide level2">
<h2>separate business logic from persistence</h2>
<!-- ![hexagonal arcitectural pattern (a.k.a. ports & adapters)](figures/hexagonal_interface.drawio.svg){width=700} -->
<div class="columns">
<div class="column" style="width:40%;">
<p>architectural styles provides patterns to separate the business logic
from the persistence layer</p>
<p>unit testing usually targets the business logic</p>
<div class="fragment text-smaller mt-2">
<p>which was embedded into the query in the previous example</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    lesson <span class="op">/</span> <span class="fl">50.0</span> <span class="kw">AS</span> progress</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> activity</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    user_id <span class="op">=</span> <span class="dv">42</span> <span class="kw">AND</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="st">&#39;success&#39;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> lesson <span class="kw">DESC</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">1</span>;</span></code></pre></div>
</div>
</div><div class="column" style="width:30%;">
<p><img data-src="figures/layered_4.drawio.svg" width="200" /></p>
</div><div class="column" style="width:30%;">
<p><img data-src="figures/onion.drawio.svg" width="275" /></p>
<p><img data-src="figures/hexagonal_extend.drawio.svg"
width="275" /></p>
</div>
</div>
</section>
<section id="separated-business-logic" class="slide level2">
<h2>separated business logic</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> query_last_finished_lesson(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    user_id: <span class="bu">int</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># establish database connection</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    con <span class="op">=</span> sqlite3.<span class="ex">connect</span>(<span class="st">&quot;data.db&quot;</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># build query</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="ss">f&quot;&quot;&quot;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="ss">    SELECT lesson</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="ss">    FROM activity</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="ss">    WHERE</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="ss">        user_id = </span><span class="sc">{</span>user_id<span class="sc">}</span><span class="ss"> AND</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="ss">        result = &#39;success&#39;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="ss">    ORDER BY lesson DESC</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="ss">    LIMIT 1;</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="ss">    &quot;&quot;&quot;</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># execute query</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> con.execute(query)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res.fetchone()[<span class="dv">0</span>]</span></code></pre></div>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb8"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_progress(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    finished: <span class="bu">int</span>, total: <span class="bu">int</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> finished <span class="op">/</span> total</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_user_progress(</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    user_id: <span class="bu">int</span>, total: <span class="bu">int</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    f <span class="op">=</span> query_last_finished_lesson(user_id)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> calculate_progress(f, total)</span></code></pre></div>
<div class="text-smaller">
<ul>
<li>now, the query is only responsible for getting the last finished
lesson
<ul>
<li>the DB connection is still in a bit out of the place, but the
testability improved</li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
<section id="separated-data-connection" class="slide level2">
<h2>separated data connection</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> query_last_finished_lesson(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    con: sqlite3.Connection,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    user_id: <span class="bu">int</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># build query</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    query <span class="op">=</span> <span class="ss">f&quot;&quot;&quot;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="ss">    SELECT lesson</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="ss">    FROM activity</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="ss">    WHERE</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="ss">        user_id = </span><span class="sc">{</span>user_id<span class="sc">}</span><span class="ss"> AND</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="ss">        result = &#39;success&#39;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="ss">    ORDER BY lesson DESC</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="ss">    LIMIT 1;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="ss">    &quot;&quot;&quot;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># execute query</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    res <span class="op">=</span> con.execute(query)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res.fetchone()[<span class="dv">0</span>]</span></code></pre></div>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb10"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> establish_database_connection(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    path: <span class="bu">str</span> <span class="op">=</span> <span class="st">&quot;data.db&quot;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> sqlite3.Connection:</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sqlite3.<span class="ex">connect</span>(path)</span></code></pre></div>
<div class="text-smaller">
<ul>
<li>now, there is a function responsible for the DB connection
<ul>
<li>it is easy to use a test database from the test suite and the
production database in the production code</li>
</ul></li>
<li>the test DB can store ‘stable’ values
<ul>
<li>the expected values in the assert statements are safe</li>
</ul></li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="mocking" class="title-slide slide level1">
<h1>mocking</h1>
<div class="columns">
<div class="column mt-4" style="width:70%;">
<ul>
<li>the whole <em>unit test</em> suite should be able to run in
milliseconds
<ul>
<li>to give immediate feedback</li>
</ul></li>
<li>slow elements of the software should be mocked
<ul>
<li>e.g., database, network connection</li>
</ul></li>
<li>part of arrange step</li>
</ul>
</div><div class="column" style="width:30%;">
<p><img data-src="figures/publicdomainvectors/running-turtle.svg"
width="300" /></p>
</div>
</div>
</section>
<section id="test-doubles-mock-object-types" class="slide level2">
<h2>test doubles – mock object types</h2>
<p>there is no open standard for categories</p>
<div class="columns">
<div class="column mt-2" style="width:40%;">
<ul>
<li>dummy</li>
<li>stub</li>
<li>spy</li>
<li>mock</li>
<li>fake</li>
</ul>
</div><div class="column" style="width:60%;">
<!-- ![](figures/publicdomainvectors/software-testing-concept.svg){width=200} -->
<!-- ![by [Leo Reynolds](https://flickr.com/photos/lwr/3365192312) | [CC&nbsp;BY-NC-SA&nbsp;2.0](https://creativecommons.org/licenses/by-nc-sa/2.0/)](figures/borrowed/test_dummy.jpg){width=200} -->
<figure>
<img data-src="figures/spectrum_of_test_doubles.drawio.svg" width="400"
alt="reproduction of figure 2 from [5]" />
<figcaption aria-hidden="true">reproduction of figure 2 from <span
class="citation" data-cites="seemann2007unit">[5]</span></figcaption>
</figure>
</div>
</div>
<div class="text-smaller">
<p>these are from the book <em>xUnit test patterns: Refactoring test
code</em> – by Gerard Meszaros <span class="citation"
data-cites="meszaros2007xunit">[6]</span></p>
</div>
</section>
<section id="test-doubles-test-dummy" class="slide level2">
<h2>test doubles – test dummy</h2>
<div class="columns column-gapless">
<div class="column" style="width:70%;">
<div class="text-smaller">
<blockquote>
<p><strong>The simplest, most primitive type of test double.</strong>
Dummies contain no implementation and are mostly used when required as
parameter values, but not otherwise utilized. Nulls can be considered
dummies, but real dummies are derivations of interfaces or base classes
without any implementation at all.</p>
<p>– Mark Seemann <span class="citation"
data-cites="seemann2007unit">[5]</span></p>
</blockquote>
</div>
</div><div class="column" style="width:30%;">
<div class="sourceCode" id="cb11"><pre
class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span> <span class="vs">&#39;sinatra&#39;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>get <span class="vs">&#39;/user-statistics&#39;</span> <span class="cf">do</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">{}</span><span class="at">.to_json</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
</div>
</div>
</section>
<section id="test-doubles-test-stub" class="slide level2">
<h2>test doubles – test stub</h2>
<div class="columns column-gapless">
<div class="column" style="width:58%;">
<p>provides static input</p>
<div class="text-smaller">
<blockquote>
<p>A step up from dummies, stubs are minimal implementations of
interfaces or base classes. Methods returning void will typically
contain no implementation at all, while methods returning values will
typically return hard-coded values.</p>
<p>– Mark Seemann <span class="citation"
data-cites="seemann2007unit">[5]</span></p>
</blockquote>
</div>
</div><div class="column" style="width:42%;">
<div class="sourceCode" id="cb12"><pre
class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span> <span class="vs">&#39;sinatra&#39;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>get <span class="vs">&#39;/user-statistics&#39;</span> <span class="cf">do</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  data <span class="kw">=</span> <span class="kw">{}</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;name&#39;</span><span class="kw">]</span> <span class="kw">=</span> <span class="vs">&#39;Marvin&#39;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;id&#39;</span><span class="kw">]</span> <span class="kw">=</span> <span class="dv">42</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;registration&#39;</span><span class="kw">]</span> <span class="kw">=</span> <span class="vs">&#39;2019-10-02&#39;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;progress&#39;</span><span class="kw">]</span> <span class="kw">=</span> <span class="fl">0.84</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;activity&#39;</span><span class="kw">]</span> <span class="kw">=</span> <span class="kw">[</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span><span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">2</span><span class="kw">]</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span><span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">4</span><span class="kw">]</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span><span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">0</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">0</span><span class="kw">]</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">[</span><span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">9</span>, <span class="dv">9</span><span class="kw">]</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">]</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> data<span class="at">.to_json</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
</div>
</div>
</section>
<section id="test-doubles-test-spy" class="slide level2">
<h2>test doubles – test spy</h2>
<div class="columns column-gapless">
<div class="column" style="width:60%;">
<div class="text-smaller">
<blockquote>
<p>A test spy is similar to a stub, but besides giving clients an
instance on which to invoke members, a spy will also record which
members were invoked so that unit tests can verify that members were
invoked as expected.</p>
<p>– Mark Seemann <span class="citation"
data-cites="seemann2007unit">[5]</span></p>
</blockquote>
</div>
</div><div class="column text-smaller" style="width:40%;">
<blockquote>
<p>One form of this might be an email service that records how many
messages it was sent.</p>
<p>– Martin Fowler <span class="citation"
data-cites="fowler2006test">[7]</span></p>
</blockquote>
<div class="mt-2">
<p>or keeping track of the test user (of the learning app) and give back
values according to the input parameter</p>
</div>
</div>
</div>
</section>
<section id="test-doubles-test-fake" class="slide level2">
<h2>test doubles – test fake</h2>
<div class="columns column-gapless">
<div class="column" style="width:58%;">
<div class="text-smaller">
<blockquote>
<p>A fake contains more complex implementations, typically handling
interactions between different members of the type it’s inheriting.
While not a complete production implementation, a fake may resemble a
production implementation, albeit with some shortcuts.</p>
<p>– Mark Seemann <span class="citation"
data-cites="seemann2007unit">[5]</span></p>
</blockquote>
</div>
<p>when you add logic for the test double, that might be tested as
well</p>
</div><div class="column text-smaller" style="width:42%;">
<div class="sourceCode" id="cb13"><pre
class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span> <span class="vs">&#39;sinatra&#39;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="cf">def</span> generate_progress</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rand</span><span class="at">.round</span>(<span class="dv">2</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="cf">def</span> generate_activity_matrix</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  result <span class="kw">=</span> <span class="kw">[]</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  (<span class="dv">1</span><span class="kw">..</span><span class="dv">4</span>)<span class="at">.each</span> <span class="cf">do</span> <span class="kw">|</span>_w<span class="kw">|</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    daily <span class="kw">=</span> <span class="kw">[]</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    (<span class="dv">1</span><span class="kw">..</span><span class="dv">7</span>)<span class="at">.each</span> <span class="kw">{|</span>_d<span class="kw">|</span> daily<span class="at">.push</span> <span class="fu">rand</span>(<span class="dv">10</span>)<span class="kw">}</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    result<span class="at">.push</span> daily</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  result</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>get <span class="vs">&#39;/user-statistics&#39;</span> <span class="cf">do</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  data <span class="kw">=</span> <span class="kw">{}</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;name&#39;</span><span class="kw">]</span> <span class="kw">=</span> <span class="vs">&#39;Marvin&#39;</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;id&#39;</span><span class="kw">]</span> <span class="kw">=</span> <span class="dv">42</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;registration&#39;</span><span class="kw">]</span> <span class="kw">=</span> <span class="vs">&#39;2019-10-02&#39;</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;progress&#39;</span><span class="kw">]</span> <span class="kw">=</span> generate_progress</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  data<span class="kw">[</span><span class="vs">&#39;activity&#39;</span><span class="kw">]</span> <span class="kw">=</span> generate_activity_matrix</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> data<span class="at">.to_json</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code></pre></div>
</div>
</div>
</section>
<section id="test-doubles-test-mock" class="slide level2">
<h2>test doubles – test mock</h2>
<div class="columns column-gapless">
<div class="column" style="width:65%;">
<div class="text-smaller">
<blockquote>
<p><strong>A mock is dynamically created by a mock library</strong> (the
others are typically produced by a test developer using code). The test
developer never sees the actual code implementing the interface or base
class, but can configure the mock to provide return values, expect
particular members to be invoked, and so on. Depending on its
configuration, a mock can behave like a dummy, a stub, or a spy.</p>
<p>– Mark Seemann <span class="citation"
data-cites="seemann2007unit">[5]</span></p>
</blockquote>
</div>
</div><div class="column" style="width:35%;">
<figure>
<img data-src="figures/spectrum_of_test_doubles.drawio.svg" width="400"
alt="reproduction of figure 2 from [5]" />
<figcaption aria-hidden="true">reproduction of figure 2 from <span
class="citation" data-cites="seemann2007unit">[5]</span></figcaption>
</figure>
</div>
</div>
</section></section>
<section>
<section id="test-driven-development-tdd"
class="title-slide slide level1">
<h1>test-driven development (TDD)</h1>
<div class="columns">
<div class="column mt-5" style="width:55%;">
<ul>
<li>write test <em>before</em> writing the tested code</li>
<li>without the called unit the test will fail
<ul>
<li>the called function does not exist</li>
</ul></li>
<li>write code, that makes the test pass</li>
<li>improve the code quality
<ul>
<li>e.g., make it clear and clean</li>
<li>both the test and tested code</li>
</ul></li>
</ul>
</div><div class="column" style="width:45%;">
<p><img data-src="figures/tdd.drawio.svg" width="350" /></p>
</div>
</div>
</section>
<section id="red" class="slide level2">
<h2>red</h2>
<div class="columns">
<div class="column mt-3" style="width:75%;">
<ul>
<li>test only one thing at a time</li>
<li>the test should be very simple</li>
<li>increase the complexity of the test cases continuously</li>
<li>mock the (external) dependencies
<ul>
<li>bit later</li>
</ul></li>
</ul>
</div><div class="column" style="width:25%;">
<p><img data-src="figures/tdd_red.drawio.svg" width="250" /></p>
</div>
</div>
</section>
<section id="green" class="slide level2">
<h2>green</h2>
<div class="columns">
<div class="column mt-3" style="width:75%;">
<ul>
<li>use the possible simplest code to pass the test</li>
<li>it does not matter if the solution is ‘ugly’
<ul>
<li>but the test must pass</li>
</ul></li>
<li>as soon as the test passes, this step is done
<ul>
<li>and all of the old tests as well</li>
</ul></li>
</ul>
</div><div class="column" style="width:25%;">
<p><img data-src="figures/tdd_green.drawio.svg" width="250" /></p>
</div>
</div>
</section>
<section id="refactor" class="slide level2">
<h2>refactor</h2>
<div class="columns">
<div class="column" style="width:75%;">
<div class="text-smaller">
<blockquote>
<p>Refactoring is a disciplined technique for restructuring an existing
body of code, altering its internal structure without changing its
external behavior.</p>
<p>– Martin Fowler <span class="citation"
data-cites="fowler_refactoringcom">[8]</span></p>
</blockquote>
</div>
<ul>
<li>on code level
<ul>
<li><span class="text-smaller">style guide, best practices, idiomatic
code</span></li>
</ul></li>
<li>on architecture level
<ul>
<li><span class="text-smaller">design patterns like SOLID, DRY,
etc.</span></li>
</ul></li>
<li>part of day-to-day programming
<ul>
<li><span class="text-smaller">‘campground rule’: leave the code better
than you found it</span></li>
</ul></li>
</ul>
</div><div class="column" style="width:25%;">
<p><img data-src="figures/tdd_refactor.drawio.svg" width="250" /></p>
</div>
</div>
</section>
<section id="test-driven-development-fizzbuzz-example"
class="slide level2">
<h2>test-driven development – fizzbuzz example</h2>
<div class="columns">
<div class="column" style="width:55%;">
<p><span class="text-smaller">fizzbuzz.py</span></p>
<div class="r-stack">
<div class="fragment fade-out width-100" data-fragment-index="1">
<div class="sourceCode" id="cb14"><pre
class="sourceCode python"><code class="sourceCode python"></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="1">
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz():</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="2">
<div class="sourceCode" id="cb16"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i):</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">pass</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="3">
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i):</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;Fizz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="4">
<div class="sourceCode" id="cb18"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i):</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;Fizz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="5">
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i):</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Buzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="6">
<div class="sourceCode" id="cb20"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i):</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Buzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="7">
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i):</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">15</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Buzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="8">
<div class="sourceCode" id="cb22"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">15</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Buzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="9">
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i):</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">15</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">str</span>(i)</span></code></pre></div>
</div>
</div>
</div><div class="column" style="width:45%;">
<p><span class="text-smaller">test_fizzbuzz.py</span></p>
<div class="r-stack">
<div class="fragment fade-out width-100" data-fragment-index="4">
<div class="sourceCode" id="cb24"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> <span class="op">*</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="4">
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> <span class="op">*</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="5">
<div class="sourceCode" id="cb26"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> <span class="op">*</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="6">
<div class="sourceCode" id="cb27"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> <span class="op">*</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">15</span>) <span class="op">==</span> <span class="st">&quot;FizzBuzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="7">
<div class="sourceCode" id="cb28"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> <span class="op">*</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">15</span>) <span class="op">==</span> <span class="st">&quot;FizzBuzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="8">
<div class="sourceCode" id="cb29"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> <span class="op">*</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">15</span>) <span class="op">==</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">17</span>) <span class="op">==</span> <span class="st">&quot;17&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="9">
<div class="sourceCode" id="cb30"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> <span class="op">*</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">15</span>) <span class="op">==</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">17</span>) <span class="op">==</span> <span class="st">&quot;17&quot;</span></span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="r-stack">
<div class="fragment fade-out" data-fragment-index="1">
<p>NameError: name ‘fizzbuzz’ is not defined</p>
</div>
<div class="fragment current-visible" data-fragment-index="1">
<p>TypeError: fizzbuzz() takes 0 positional arguments but 1 was
given</p>
</div>
<div class="fragment current-visible" data-fragment-index="2">
<p>AssertionError: assert None == ‘Fizz’</p>
</div>
<div class="fragment current-visible" data-fragment-index="3">
<p>passed</p>
</div>
<div class="fragment current-visible" data-fragment-index="4">
<p>AssertionError: assert ‘Fizz’ == ‘Buzz’ (5)</p>
</div>
<div class="fragment current-visible" data-fragment-index="5">
<p>passed</p>
</div>
<div class="fragment current-visible" data-fragment-index="6">
<p>AssertionError: assert ‘Fizz’ == ‘FizzBuzz’ (15)</p>
</div>
<div class="fragment current-visible" data-fragment-index="7">
<p>passed</p>
</div>
<div class="fragment current-visible" data-fragment-index="8">
<p>AssertionError: assert None == ‘17’ (17)</p>
</div>
<div class="fragment current-visible" data-fragment-index="9">
<p>passed</p>
<p><span class="text-smaller">there is not much to improve on the code,
except that according to the PEP8 Python style guide the ‘star import’
is not allowed; it should be <code>import fizzbuzz</code></span></p>
</div>
</div>
</section>
<section id="section" class="slide level2">
<h2></h2>
<blockquote>
<p>As the tests get more specific, the code gets more generic.</p>
<p>– Robert C. Martin, <a
href="http://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html">The
Cycles of TDD</a> <span class="citation"
data-cites="martin2014cycles">[9]</span></p>
</blockquote>
<p><img data-src="figures/test_code_generality.drawio.svg" class="mt-4"
width="375" /></p>
</section>
<section id="transformation-priority-premise" class="slide level2">
<h2>transformation priority premise</h2>
<ol type="1">
<li>({} -&gt; nil) <em>from no code at all to code that employs
nil</em></li>
<li>(nil -&gt; constant)</li>
<li>(constant -&gt; constant+) <em>a simple constant to a more complex
constant</em></li>
<li>(constant -&gt; scalar) <em>replacing a constant with a variable or
an argument</em></li>
<li>(statement -&gt; statements) <em>adding more unconditional
statements</em></li>
<li>(unconditional -&gt; if) <em>splitting the execution path</em></li>
<li>(scalar -&gt; array)</li>
<li>(array -&gt; container)</li>
<li>(statement -&gt; tail-recursion)</li>
<li>(if -&gt; while)</li>
<li>(expression -&gt; function) <em>replacing an expression with a
function or algorithm</em></li>
<li>(variable -&gt; assignment) <em>replacing the value of a
variable</em></li>
</ol>
<div class="text-smaller">
<p>source: Robert C. Martin, <a
href="https://blog.cleancoder.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html">The
Transformation Priority Premise</a> <span class="citation"
data-cites="martin2013transformation">[10]</span></p>
</div>
</section>
<section id="coding-kata" class="slide level2">
<h2>coding kata</h2>
<div class="columns">
<div class="column" style="width:60%;">
<dl>
<dt>kata (型)</dt>
<dd>
set sequence of positions and movements in martial arts
</dd>
</dl>
<div class="mt-2">
<ul>
<li>code/coding kata is a (relatively) simple programming task, that is
meant to practised over and over again (in TDD)
<ul>
<li>in different languages, different praradigms, different coding
styles</li>
</ul></li>
<li>some coding kata
<ul>
<li><a href="https://www.codewars.com/kata/">codewars.com</a>, <a
href="http://codekata.com/">codekata.com</a>, etc.</li>
</ul></li>
</ul>
</div>
</div><div class="column" style="width:40%;">
<p><img data-src="figures/publicdomainvectors/japan-gate-clipart.svg"
width="300" /></p>
</div>
</div>
</section></section>
<section>
<section id="too-strict-tdd" class="title-slide slide level1">
<h1>too strict TDD</h1>
<div class="columns">
<div class="column mt-5" style="width:60%;">
<ul>
<li><span class="tooltip" title="test-driven development">TDD</span>
requires adding one test (case) at a time and then make the code
pass</li>
<li>this is often unrealistic
<ul>
<li>e.g., on existing codebase, in research</li>
</ul></li>
<li>strict TDD is good for learning, practising
<ul>
<li>coding kata</li>
</ul></li>
<li>but tests are still important!</li>
<li><span class="fragment" data-fragment-index="1">what I do is to turn
experiments into tests</span></li>
</ul>
</div><div class="column text-smaller r-frame fragment"
data-fragment-index="1" style="width:40%;">
<p><strong>experiment-driven testing</strong></p>
<div class="text-smaller">
<p>task: get day from a date string like <span
style="display: inline-block;"><code>Nov 08, 13:11</code></span></p>
</div>
<ol type="1">
<li>do experiment</li>
</ol>
<div class="sourceCode" id="cb31"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;Nov 08, 13:11&quot;</span>[<span class="dv">3</span>:<span class="dv">5</span>]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">&#39; 0&#39;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="st">&quot;Nov 08, 13:11&quot;</span>[<span class="dv">4</span>:<span class="dv">6</span>]</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">&#39;08&#39;</span></span></code></pre></div>
<ol start="2" type="1">
<li>put it to a function</li>
</ol>
<div class="sourceCode" id="cb32"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> extract_day(s: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">int</span>:</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">int</span>(s[<span class="dv">4</span>:<span class="dv">6</span>])</span></code></pre></div>
<ol start="3" type="1">
<li>add test based on the experiment</li>
</ol>
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_extract_day():</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    actual <span class="op">=</span> extract_day(<span class="st">&quot;Nov 08, 13:11&quot;</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    expected <span class="op">=</span> <span class="dv">8</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> actual <span class="op">==</span> expected</span></code></pre></div>
</div>
</div>
</section>
<section id="behaviour-driven-development-bdd" class="slide level2">
<h2>behaviour-driven development (BDD)</h2>
<div class="columns">
<div class="column mt-3" style="width:55%;">
<ul>
<li>BDD is an extension of <span class="tooltip"
title="test-driven development">TDD</span></li>
<li>using BDD can help you to turn an idea for a requirement into
implemented, <strong>tested</strong>, production-ready code</li>
<li>BDD starts from a user story and focuses on adding the acceptance
criteria
<ul>
<li>which can be turned into unit tests</li>
</ul></li>
</ul>
</div><div class="column" style="width:45%;">
<pre><code>Title (one line describing the story)

Narrative:
As a [role]
I want [feature]
So that [benefit]

Acceptance Criteria: (presented as Scenarios)

Scenario 1: Title
Given [context]
  And [some more context]...
When  [event]
Then  [outcome]
  And [another outcome]...

Scenario 2: ...</code></pre>
</div>
</div>
<div class="text-smaller">
<p>taken from <span class="citation"
data-cites="north2007what">[11]</span> by Daniel Terhorst-North | CC-BY
4.0</p>
</div>
<aside class="notes">
<ul>
<li>the strict TDD does not allow more than one new test at a time</li>
</ul>
</aside>
</section>
<section id="acceptance-criteria" class="slide level2">
<h2>acceptance criteria</h2>
<div class="columns">
<div class="column mt-2" style="width:55%;">
<ul>
<li>describes how a system should behave under certain circumstances
<ul>
<li>may originate from domain experts</li>
</ul></li>
<li>the ‘rules’ are written in natural language, but in a structured
form
<ul>
<li>easy to discuss with non-developers</li>
</ul></li>
<li>based on the acceptance criteria multiple tests can be written</li>
</ul>
</div><div class="column" style="width:45%;">
<pre><code>Title (one line describing the story)

Narrative:
As a [role]
I want [feature]
So that [benefit]

Acceptance Criteria: (presented as Scenarios)

Scenario 1: Title
Given [context]
  And [some more context]...
When  [event]
Then  [outcome]
  And [another outcome]...

Scenario 2: ...</code></pre>
<div class="text-smaller">
<p>taken from <span class="citation"
data-cites="north2007what">[11]</span> by Daniel Terhorst-North | CC-BY
4.0</p>
</div>
</div>
</div>
</section>
<section id="acceptance-test-driven-development" class="slide level2">
<h2>acceptance test-driven development</h2>
<div class="columns">
<div class="column mt-4" style="width:70%;">
<ul>
<li>extends <span class="tooltip"
title="test-driven development">TDD</span> and <span class="tooltip"
title="behaviour-driven development">BDD</span></li>
<li>instead of a unit, ATDD focuses on the acceptance criteria of the
whole system</li>
<li>advocates writing acceptance tests before developers begin
coding</li>
</ul>
<div class="mt-3">
<p>test format like <span class="tooltip"
title="behaviour-driven development">BDD</span>, example from <span
class="citation" data-cites="enwiki:1091258091">[12]</span>:</p>
<pre><code>Given Book that has not been checked out
And User who is registered on the system
When User checks out a book
Then Book is marked as checked out</code></pre>
</div>
</div><div class="column" style="width:30%;">
<p><img data-src="figures/publicdomainvectors/to-do-list.svg"
width="300" /></p>
</div>
</div>
</section>
<section id="readme-driven-development" class="slide level2">
<h2>readme driven development</h2>
<div class="wide-quote">
<blockquote>
<p>beautifully crafted library with no documentation is damn near
worthless […]</p>
<p>So how do we solve this problem? Write your Readme first.</p>
<p>– by Tom Preston-Werner <span class="citation"
data-cites="prestonwerner2010readme">[13]</span></p>
</blockquote>
</div>
<div class="text-smaller">
<p>readme ~ user manual, but brief, concise</p>
</div>
<div class="mt-2">
<ul>
<li>before you write any code or tests or behaviors or stories or
anything</li>
<li>document how a user would use the software</li>
<li>you’ll know what you need to implement</li>
<li>a lot simpler to have a discussion based on something written
down</li>
</ul>
</div>
<div class="text-smaller">
<p>source: <a
href="https://tom.preston-werner.com/2010/08/23/readme-driven-development.html">Readme
Driven Development</a> – by Tom Preston-Werner <span class="citation"
data-cites="prestonwerner2010readme">[13]</span></p>
</div>
</section></section>
<section>
<section id="test-coverage" class="title-slide slide level1">
<h1>test coverage</h1>
<ul>
<li>the percentage of the code lines ‘protected’ or covered by
tests</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<p><span class="text-smaller"><code>code/fizzbuzz.py</code></span></p>
<div class="r-stack">
<div class="fragment fade-out width-100" data-fragment-index="1">
<div class="sourceCode" id="cb37" data-line-numbers="2-6,9,11"
data-highlight-background="#c6ff8c"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">15</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="bu">str</span>(i)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="1">
<div class="sourceCode" id="cb38" data-line-numbers="2-9,11"
data-highlight-background="#c6ff8c"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">15</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="bu">str</span>(i)</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="2">
<div class="sourceCode" id="cb39" data-line-numbers="2-11"
data-highlight-background="#c6ff8c"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fizzbuzz(i: <span class="bu">int</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="st">&quot;&quot;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> i <span class="op">%</span> <span class="dv">15</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>        result <span class="op">+=</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="bu">str</span>(i)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result</span></code></pre></div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><span
class="text-smaller"><code>code/test_fizzbuzz.py</code></span></p>
<div class="r-stack">
<div class="fragment fade-out width-100" data-fragment-index="1">
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> fizzbuzz</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">15</span>) <span class="op">==</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="1">
<div class="sourceCode" id="cb41"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> fizzbuzz</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">15</span>) <span class="op">==</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span></code></pre></div>
</div>
<div class="fragment current-visible width-100" data-fragment-index="2">
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fizzbuzz <span class="im">import</span> fizzbuzz</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_fizzbuzz():</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">15</span>) <span class="op">==</span> <span class="st">&quot;FizzBuzz&quot;</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">3</span>) <span class="op">==</span> <span class="st">&quot;Fizz&quot;</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">5</span>) <span class="op">==</span> <span class="st">&quot;Buzz&quot;</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> fizzbuzz(<span class="dv">17</span>) <span class="op">==</span> <span class="st">&quot;17&quot;</span></span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="r-stack">
<div class="fragment fade-out" data-fragment-index="1">
<p>test coverage: 70%</p>
</div>
<div class="fragment current-visible" data-fragment-index="1">
<p>test coverage: 90%</p>
</div>
<div class="fragment current-visible" data-fragment-index="2">
<p>test coverage: 100%</p>
<p>four control flow branch, all of them needs to be tested</p>
</div>
</div>
<!-- #F72388 -->
</section>
<section id="how-to-measure-code-quality" class="slide level2">
<h2>how to measure code quality?</h2>
<p>it is hard to objectively measure the quality of code</p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li><span class="alpha-50">number of source lines of code
(SLOC)</span></li>
<li>style guide compliance <span class="fragment text-color-secondary"
data-fragment-index="1">– is the code clean?</span></li>
<li><span class="alpha-50">Halstead metrics</span></li>
<li>cyclomatic complexity <span class="fragment text-color-secondary"
data-fragment-index="1">– is the code simple?</span></li>
<li><span class="alpha-50">maintainability index</span></li>
<li>test coverage <span class="fragment text-color-secondary"
data-fragment-index="1">– is the code tested?</span></li>
</ul>
</div><div class="column" style="width:40%;">
<p><img
data-src="figures/publicdomainvectors/worker-takes-measurements.svg"
width="400" /></p>
</div>
</div>
</section>
<section id="when-unit-tests-are-not-more-than-a-measure"
class="slide level2">
<h2>when unit tests are not more than a measure</h2>
<div class="columns">
<div class="column mt-4" style="width:70%;">
<ul>
<li>zombie scrum: doing something without heart, without its
essence</li>
<li>if you write unit tests <em>just</em> to increase the test coverage
they loose its function
<ul>
<li>and collect badges: <img
data-src="figures/code%20coverage_%2084_.svg"
class="no-margin va-middle" width="150" /> <img
data-src="figures/code%20coverage_%20100_.svg"
class="no-margin va-middle" width="150" /></li>
</ul></li>
</ul>
</div><div class="column" style="width:30%;">
<figure>
<img data-src="figures/borrowed/xkcd/goodharts_law_2x.png" width="300"
alt="by Randall Munroe CC BY-NC 2.5 | source" />
<figcaption aria-hidden="true">by Randall Munroe<br><a
href="https://creativecommons.org/licenses/by-nc/2.5/deed.en">CC BY-NC 2.5</a>
| <a href="https://xkcd.com/2899/">source</a></figcaption>
</figure>
</div>
</div>
</section>
<section id="what-to-test" class="slide level2">
<h2>what to test?</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="sourceCode" id="cb43"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_progress(</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>    finished: <span class="bu">int</span>,</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    total: <span class="bu">int</span>,</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>    as_percentage: <span class="bu">bool</span>,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    progress <span class="op">=</span> finished <span class="op">/</span> total</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> as_percentage:</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> progress <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> progress</span></code></pre></div>
</div><div class="column" style="width:60%;">
<div class="r-stack">
<div class="width-100">
<div class="sourceCode" id="cb44"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> progress <span class="im">import</span> calculate_progress</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_progress():</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    total <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(total <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>        expected <span class="op">=</span> i <span class="op">/</span> total</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>        actual <span class="op">=</span> calculate_progress(i, total, <span class="va">False</span>)</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> actual <span class="op">==</span> expected</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_progress_percentage():</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    total <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(total <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>        expected <span class="op">=</span> i <span class="op">/</span> total <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>        actual <span class="op">=</span> calculate_progress(i, total, <span class="va">True</span>)</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">assert</span> actual <span class="op">==</span> expected</span></code></pre></div>
</div>
<div class="fragment" data-fragment-index="1">
<p><img data-src="figures/cross.drawio.svg" width="500"
height="325" /></p>
</div>
</div>
</div>
</div>
<div class="fragment" data-fragment-index="1">
<p>test coverage: 100%, achievement obtained, but this is completely
stupid</p>
</div>
</section>
<section id="test-the-edge-cases" class="slide level2">
<h2>test the edge cases!</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="sourceCode" id="cb45"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> calculate_progress(</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    finished: <span class="bu">int</span>,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    total: <span class="bu">int</span>,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    as_percentage: <span class="bu">bool</span>,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">-&gt;</span> <span class="bu">float</span>:</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    progress <span class="op">=</span> finished <span class="op">/</span> total</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> as_percentage:</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> progress <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> progress</span></code></pre></div>
<div class="fragment" data-fragment-index="1">
<p>this function need some value checking</p>
</div>
</div><div class="column" style="width:60%;">
<dl>
<dt>what does this function do?</dt>
<dd>
<ul>
<li>divides the number of finished lessons by the total number of
lessons</li>
</ul>
</dd>
<dd>
<ul>
<li>returns progress in the closed interval of [0, 1] or [0, 100]</li>
</ul>
</dd>
</dl>
<div class="fragment text-align-left" data-fragment-index="1">
<dl>
<dt>edge cases</dt>
<dd>
<ul>
<li>total is 0</li>
</ul>
</dd>
<dd>
<ul>
<li>total is less than 0</li>
</ul>
</dd>
<dd>
<ul>
<li>finished is less than 0</li>
</ul>
</dd>
<dd>
<ul>
<li>finished is greater than total</li>
</ul>
</dd>
</dl>
</div>
</div>
</div>
<div class="fragment r-frame mt-1" data-fragment-index="2">
<p>test coverage only measures that every control flow branch is
tested</p>
<p>the point of testing is testing for the edge cases</p>
</div>
</section>
<section id="how-to-find-edge-cases" class="slide level2">
<h2>how to find edge cases</h2>
<ul>
<li>interval boundaries</li>
<li>requirements</li>
<li>defining of done</li>
<li>acceptance criteria of <span class="tooltip"
title="behaviour-driven development">BDD</span>-style scenarios
<ul>
<li><span class="text-smaller">extended user user stories</span></li>
</ul></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<pre><code>Story: Account Holder withdraws cash

As an Account Holder
I want to withdraw cash from an ATM
So that I can get money when the bank is closed</code></pre>
</div><div class="column" style="width:50%;">
<div class="text-smaller">
<p>story example taken from <a
href="https://dannorth.net/whats-in-a-story/">What’s in a Story?</a>
<span class="citation" data-cites="north2007what">[11]</span> by Daniel
Terhorst-North | CC-BY 4.0</p>
</div>
</div>
</div>
<div class="columns column-gapless">
<div class="column" style="width:50%;">
<p><span class="text-smaller">an acceptance criterion:</span></p>
<pre><code>Scenario 1: Account has sufficient funds
Given the account balance is $100
 And the card is valid
 And the machine contains enough money
When the Account Holder requests $20
Then the ATM should dispense $20
 And the account balance should be $80
 And the card should be returned</code></pre>
</div><div class="column mt-5" style="width:10%;">
<p><img data-src="figures/right_arrow.drawio.svg" width="100" /></p>
</div><div class="column" style="width:40%;">
<p><span class="text-smaller">a test function:</span></p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> test_withdraw():</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>    account <span class="op">=</span> Account(balance<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    withdraw_money(account, <span class="dv">20</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> account.balance <span class="op">==</span> <span class="dv">80</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    account <span class="op">=</span> Account(balance<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    withdraw_money(account, <span class="dv">20</span>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> account.balance <span class="op">==</span> <span class="dv">10</span></span></code></pre></div>
</div>
</div>
<!-- # fuzz testing (fuzzing) -->
</section></section>
<section>
<section id="legacy-code" class="title-slide slide level1">
<h1>legacy code</h1>
<div class="columns column-gapless">
<div class="column" style="width:60%;">
<ul>
<li>old, inherited code</li>
<li>difﬁcult-to-change code that we don’t understand</li>
<li>rotten
<ul>
<li><span class="text-smaller">degraded, deteriorated, or lost its use
or performance over time <span class="citation"
data-cites="enwiki:1236668404">[14]</span></span></li>
</ul></li>
<li>spaghetti code
<ul>
<li><span class="text-smaller">“has a complex and tangled control
structure, resulting in a program flow that is like a bowl of spaghetti,
twisted and tangled” <span class="citation"
data-cites="horstmann2007java">[15]</span> via <span class="citation"
data-cites="enwiki:1245199146">[16]</span></span></li>
</ul></li>
</ul>
</div><div class="column r-frame" style="width:40%;">
<p><strong>technical debt</strong></p>
<div class="text-smaller">
<p>implied cost of future reworking because a solution prioritized
short-term solution over long-term design <span class="citation"
data-cites="beal2011technical">[17]</span> <span class="citation"
data-cites="enwiki:1253473056">[18]</span></p>
<dl>
<dt><span class="text-smaller">some reasons:</span></dt>
<dd>
<ul>
<li>ignoring style guides, coding standards</li>
</ul>
</dd>
<dd>
<ul>
<li>lack of test suite</li>
</ul>
</dd>
<dd>
<ul>
<li>tight coupling</li>
</ul>
</dd>
<dd>
<ul>
<li>temporary quick fixes</li>
</ul>
</dd>
<dd>
<ul>
<li>lack of documentation</li>
</ul>
</dd>
<dd>
<ul>
<li>laziness</li>
</ul>
</dd>
</dl>
</div>
</div>
</div>
<!--this chapter is based on the book _Working Efficiently with Legacy Code_

by Michael Feathers [@feathers2004working]-->
</section>
<section id="what-is-legacy-code" class="slide level2">
<h2>what is legacy code?</h2>
<div class="columns column-gapless">
<div class="column" style="width:80%;">
<blockquote>
<p>Code without tests is bad code. It doesn’t matter how well written it
is; it doesn’t matter how pretty or object-oriented or well-encapsulated
it is. With tests, we can change the behavior of our code quickly and
verifiably. Without them, we really don’t know if our code is getting
better or worse.</p>
<p>– Michael Feathers, Working Effectively with Legacy Code: Preface
<span class="citation" data-cites="feathers2004working">[19]</span></p>
</blockquote>
<div class="mt-2">
<ul>
<li>there is a change request, which results on code change</li>
<li>the test suite is like a safety net that can prevent that a code
change breaks an existing function</li>
</ul>
</div>
</div><div class="column" style="width:20%;">
<figure>
<img data-src="figures/tests_mark_the_place.drawio.svg" width="175"
alt="tests mark the goal" />
<figcaption aria-hidden="true"><span class="text-smaller">tests mark the
goal</span></figcaption>
</figure>
<figure>
<img data-src="figures/without_tests.drawio.svg" width="175"
alt="without tests" />
<figcaption aria-hidden="true"><span class="text-smaller">without
tests</span></figcaption>
</figure>
<div class="text-x-small">
<p>the footprint, the compass and the flag figures by <a
href="https://lorcblog.blogspot.com/">Lorc</a> under <a
href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a> via <a
href="https://game-icons.net">game-icons.net</a></p>
</div>
</div>
</div>
<!--- [További definíciók](https://dzone.com/articles/defining-legacy-code)
- Legacy Code
    - [What are the key points of Working Effectively with Legacy Code?](http://programmers.stackexchange.com/questions/122014/what-are-the-key-points-of-working-effectively-with-legacy-code)-->
</section>
<section id="the-legacy-code-dilemma" class="slide level2">
<h2>the legacy code dilemma</h2>
<blockquote>
<p>When we change code, we should have tests in place. To put tests in
place, we often have to change code.</p>
<p>– Michael Feathers, Working Effectively with Legacy Code <span
class="citation" data-cites="feathers2004working">[19]</span></p>
<p>(Part I / Chapter 2)</p>
</blockquote>
</section>
<section id="the-legacy-code-change-algorithm" class="slide level2">
<h2>the legacy code change algorithm</h2>
<!--:::::::::::: {.columns}
::::::::: {.column width="60%"}-->
<ol type="1">
<li>identify change points</li>
<li>find test points</li>
<li>break dependencies</li>
<li>write tests</li>
<li>make changes and refactor</li>
</ol>
<!--:::::::::
::::::::: {.column width="50%"}
![](figures/publicdomainvectors/paperboard-flowchart.svg){width=110}

:::::::::
::::::::::::-->
<div class="columns column-gapless fragment">
<div class="column" style="width:50%;">
<dl>
<dt>when?</dt>
<dd>
<ul>
<li>not for the sake of refactoring</li>
</ul>
</dd>
<dd>
<ul>
<li>along with other changes</li>
</ul>
</dd>
<dd>
<ul>
<li>leave the code cleaner than you found it</li>
</ul>
</dd>
</dl>
</div><div class="column" style="width:50%;">
<dl>
<dt>how?</dt>
<dd>
<ul>
<li>in small, safe steps</li>
</ul>
</dd>
<dd>
<ul>
<li>understand the code you change</li>
</ul>
</dd>
<dd>
<ul>
<li>use your IDE</li>
</ul>
</dd>
<dd>
<ul>
<li>sensing, separation, mocking</li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="text-smaller">
<p>source: Working Effectively with Legacy Code by Michael Feathers
<span class="citation" data-cites="feathers2004working">[19]</span></p>
</div>
</section>
<section id="sensing" class="slide level2">
<h2>sensing</h2>
<div class="columns column-gapless">
<div class="column" style="width:70%;">
<blockquote>
<p>We break dependencies to <strong>sense</strong> when we can’t access
values our code computes.</p>
<p>– Michael Feathers, Working Effectively with Legacy Code <span
class="citation" data-cites="feathers2004working">[19]</span></p>
</blockquote>
<div class="fragment mt-4" data-fragment-index="1">
<p>e.g., misspelled function name</p>
</div>
</div><div class="column" style="width:30%;">
<div class="r-stack">
<div class="fragment fade-out" data-fragment-index="1">
<figure>
<img data-src="figures/dependency_tree.drawio.svg" width="300"
alt="function call tree" />
<figcaption aria-hidden="true">function call tree</figcaption>
</figure>
</div>
<div class="fragment" data-fragment-index="1">
<figure>
<img data-src="figures/broken_dependency.drawio.svg" width="300"
alt="broken dependency" />
<figcaption aria-hidden="true">broken dependency</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="separation" class="slide level2">
<h2>separation</h2>
<blockquote>
<p>We break dependencies to <strong>separate</strong> when we can’t even
get a piece of code into a test harness to run.</p>
<p>– Michael Feathers, Working Effectively with Legacy Code <span
class="citation" data-cites="feathers2004working">[19]</span></p>
</blockquote>
</section>
<section id="seams" class="slide level2">
<h2>seams</h2>
<div class="columns column-gapless">
<div class="column wide-quote text-smaller" style="width:75%;">
<blockquote>
<p>A seam is a place where you can alter behavior in your program
without editing in that place.</p>
<p>– Michael Feathers, Working Effectively with Legacy Code: Part I /
chp. 4 <span class="citation"
data-cites="feathers2004working">[19]</span></p>
</blockquote>
<blockquote>
<p>A seam is a place in the code that you can insert a modification in
behavior. […] One way to take advantage of a seam is to insert some sort
of fake.</p>
<p>– tallseth via <a
href="https://stackoverflow.com/a/15336160/4737417">Stackoverflow</a> |
CC BY-SA 3.0</p>
</blockquote>
<div class="mt-1">
<ul>
<li>using inheritance
<ul>
<li><span class="text-smaller">subclass can do the same as parent
class</span></li>
<li><span class="text-smaller">but can be extended with sensing
code</span></li>
</ul></li>
<li>preprocessing seam</li>
<li>link seam
<ul>
<li><span class="text-smaller">using build script, e.g., “same” class in
different directory</span></li>
</ul></li>
</ul>
</div>
</div><div class="column" style="width:25%;">
<figure>
<img data-src="figures/seams.drawio.svg" width="300"
alt="branching control flow injecting a fake" />
<figcaption aria-hidden="true">branching control flow injecting a
fake</figcaption>
</figure>
<!-- branching control flow for examining the behavior -->
</div>
</div>
</section></section>
<section id="changing-the-software" class="title-slide slide level1">
<h1>changing the software</h1>
<table>
<thead>
<tr class="header">
<th></th>
<th>add feature</th>
<th>fix a bug</th>
<th>refactor</th>
<th>optimize</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>structure</td>
<td>changes</td>
<td>changes</td>
<td>changes</td>
<td></td>
</tr>
<tr class="even">
<td>new funcionality</td>
<td>changes</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>functionality</td>
<td></td>
<td>changes</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>resource usage</td>
<td></td>
<td></td>
<td></td>
<td>changes</td>
</tr>
</tbody>
</table>
<div class="text-smaller mt-4">
<p>Michael Feathers, Working Effectively with Legacy Code: part 1 pp 6
<span class="citation" data-cites="feathers2004working">[19]</span></p>
</div>
</section>

<section>
<section id="testing-approaches" class="title-slide slide level1">
<h1>testing approaches</h1>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>black box</strong></p>
<p><img data-src="figures/black_box.drawio.svg" width="350" /></p>
<ul>
<li>examining / testing the functionality without knowing the inner
structure</li>
<li>works at all levels: unit, integration, system, acceptance</li>
<li>also for debugging a legacy code</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>white box</strong></p>
<p><img data-src="figures/white_box.drawio.svg" width="225" /></p>
<ul>
<li>testing the internal structure as opposed to its functionality</li>
<li>often associated to unit testing, but also works on higher levels
(i.e., integration, system)</li>
</ul>
</div>
</div>
</section>
<section id="smoke-testing" class="slide level2">
<h2>smoke testing</h2>
<div class="columns">
<div class="column mt-2" style="width:75%;">
<ul>
<li>preliminary testing</li>
<li>smoke tests are a <strong>subset of test cases</strong> that cover
the <strong>most important functionality</strong> of a component or
system</li>
<li>set of tests run on each new build to verify that it is testable
before sent to the test team</li>
</ul>
<div class="text-small">
<p>source: <a
href="https://en.wikipedia.org/wiki/Smoke_testing_(software)">Smoke
testing (software), Wikipedia</a> <span class="citation"
data-cites="enwiki:1251780629">[20]</span></p>
</div>
</div><div class="column" style="width:25%;">
<p><img data-src="figures/publicdomainvectors/roof-chimney.svg"
width="250" /></p>
</div>
</div>
<div class="text-smaller">
<p>“The phrase smoke test comes from electronic hardware testing. You
plug in a new board and turn on the power. If you see smoke coming from
the board, turn off the power. You don’t have to do any more testing.
<span class="citation" data-cites="bach2002lessons">[21]</span>”</p>
</div>
</section>
<section id="rubber-duck-debugging" class="slide level2">
<h2>rubber duck debugging</h2>
<div class="columns">
<div class="column mt-1" style="width:60%;">
<ul>
<li>a method of debugging code by articulating a problem in natural
language</li>
<li>originates from a story in the book <em>The Pragmatic
Programmer</em> <span class="citation"
data-cites="hund2019pragmatic">[22]</span></li>
<li>in which a programmer explains the code, line by line, to a rubber
duck</li>
<li>rationale: teaching / explaining something can provide a deeper
understanding</li>
<li>also for reviewing</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="figures/publicdomainvectors/full-water-bathtub.svg"
width="300" /></p>
</div>
</div>
</section></section>
<section id="references" class="title-slide slide level1">
<h1>references</h1>
<div id="refs" class="text-smaller references csl-bib-body" role="list">
<div id="ref-forsberg1991relationship" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">K.
Forsberg and H. Mooz, <span>“The relationship of system engineering to
the project cycle,”</span> <em>Center for Systems Management</em>, vol.
5333, 1991.</div>
</div>
<div id="ref-beck2002test" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">K.
Beck, <em>Test driven development: By example</em>. Addison-Wesley
Professional, 2002.</div>
</div>
<div id="ref-enwiki:1249792515" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div
class="csl-right-inline">Wikipedia contributors, <span>“Unit testing —
<span>Wikipedia</span><span>,</span> the free encyclopedia.”</span> <a
href="https://en.wikipedia.org/w/index.php?title=Unit_testing&amp;oldid=1249792515"
class="uri">https://en.wikipedia.org/w/index.php?title=Unit_testing&amp;oldid=1249792515</a>,
2024.</div>
</div>
<div id="ref-fowler2021diverse" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">M.
Fowler, <span>“On the diverse and fantastical shapes of testing.”</span>
<a href="
                   https://martinfowler.com/articles/2021-test-shapes.html
                    " class="uri">
                   https://martinfowler.com/articles/2021-test-shapes.html
</a>, 02-Jun-2021.</div>
</div>
<div id="ref-seemann2007unit" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">M.
Seemann, <span>“Unit testing: Exploring the continuum of test
doubles.”</span> <a href="
                   https://learn.microsoft.com/en-us/archive/msdn-magazine/2007/september/unit-testing-exploring-the-continuum-of-test-doubles
                    " class="uri">
                   https://learn.microsoft.com/en-us/archive/msdn-magazine/2007/september/unit-testing-exploring-the-continuum-of-test-doubles
</a>, 2007.</div>
</div>
<div id="ref-meszaros2007xunit" class="csl-entry" role="listitem">
<div class="csl-left-margin">[6] </div><div class="csl-right-inline">G.
Meszaros, <em>xUnit test patterns: Refactoring test code</em>. Pearson
Education, 2007.</div>
</div>
<div id="ref-fowler2006test" class="csl-entry" role="listitem">
<div class="csl-left-margin">[7] </div><div class="csl-right-inline">M.
Fowler, <span>“Test double.”</span> <a href="
                   https://martinfowler.com/bliki/TestDouble.html
                    " class="uri">
                   https://martinfowler.com/bliki/TestDouble.html
</a>, 17-Jan-2006.</div>
</div>
<div id="ref-fowler_refactoringcom" class="csl-entry" role="listitem">
<div class="csl-left-margin">[8] </div><div class="csl-right-inline">M.
Fowler, <span>“Refactoring.”</span> <a href="
                   https://refactoring.com/
                    " class="uri">
                   https://refactoring.com/
</a>.</div>
</div>
<div id="ref-martin2014cycles" class="csl-entry" role="listitem">
<div class="csl-left-margin">[9] </div><div class="csl-right-inline">R.
C. Martin, <span>“The cycles of TDD.”</span> <a href="
                   http://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html
                    " class="uri">
                   http://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html
</a>, 17-Dec-2014.</div>
</div>
<div id="ref-martin2013transformation" class="csl-entry"
role="listitem">
<div class="csl-left-margin">[10] </div><div class="csl-right-inline">R.
C. Martin, <span>“The transformation priority premise.”</span> <a href="
                   https://blog.cleancoder.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html
                    " class="uri">
                   https://blog.cleancoder.com/uncle-bob/2013/05/27/TheTransformationPriorityPremise.html
</a>, 27-May-2013.</div>
</div>
<div id="ref-north2007what" class="csl-entry" role="listitem">
<div class="csl-left-margin">[11] </div><div class="csl-right-inline">D.
Terhorst-North, <span>“What’s in a story?”</span> <a href="
                    https://dannorth.net/whats-in-a-story
                    " class="uri">
                    https://dannorth.net/whats-in-a-story
</a>, 11-Feb-2007.</div>
</div>
<div id="ref-enwiki:1091258091" class="csl-entry" role="listitem">
<div class="csl-left-margin">[12] </div><div
class="csl-right-inline">Wikipedia contributors, <span>“Acceptance
test-driven development — <span>Wikipedia</span><span>,</span> the free
encyclopedia.”</span> <a
href="https://en.wikipedia.org/w/index.php?title=Acceptance_test-driven_development&amp;oldid=1091258091"
class="uri">https://en.wikipedia.org/w/index.php?title=Acceptance_test-driven_development&amp;oldid=1091258091</a>,
2022.</div>
</div>
<div id="ref-prestonwerner2010readme" class="csl-entry" role="listitem">
<div class="csl-left-margin">[13] </div><div class="csl-right-inline">T.
Preston-Werner, <span>“Readme driven development.”</span> <a href="
                   https://tom.preston-werner.com/2010/08/23/readme-driven-development.html
                    " class="uri">
                   https://tom.preston-werner.com/2010/08/23/readme-driven-development.html
</a>, 23-Aug-2010.</div>
</div>
<div id="ref-enwiki:1236668404" class="csl-entry" role="listitem">
<div class="csl-left-margin">[14] </div><div
class="csl-right-inline">Wikipedia contributors, <span>“Software rot —
<span>Wikipedia</span><span>,</span> the free encyclopedia.”</span> <a
href="
                    https://en.wikipedia.org/w/index.php?title=Software_rot&amp;oldid=1236668404
                    " class="uri">
                    https://en.wikipedia.org/w/index.php?title=Software_rot&amp;oldid=1236668404
</a>, 2024.</div>
</div>
<div id="ref-horstmann2007java" class="csl-entry" role="listitem">
<div class="csl-left-margin">[15] </div><div class="csl-right-inline">C.
S. Horstmann, <em>Java concepts for AP computer science</em>. John Wiley
&amp; Sons, Inc., 2007.</div>
</div>
<div id="ref-enwiki:1245199146" class="csl-entry" role="listitem">
<div class="csl-left-margin">[16] </div><div
class="csl-right-inline">Wikipedia contributors, <span>“Spaghetti code —
<span>Wikipedia</span><span>,</span> the free encyclopedia.”</span> <a
href="https://en.wikipedia.org/w/index.php?title=Spaghetti_code&amp;oldid=1245199146"
class="uri">https://en.wikipedia.org/w/index.php?title=Spaghetti_code&amp;oldid=1245199146</a>,
2024.</div>
</div>
<div id="ref-beal2011technical" class="csl-entry" role="listitem">
<div class="csl-left-margin">[17] </div><div class="csl-right-inline">V.
Beal, <span>“Technical debt.”</span> <a href="
                   https://www.techopedia.com/definition/27913/technical-debt
                    " class="uri">
                   https://www.techopedia.com/definition/27913/technical-debt
</a>, 21-Nov-2011.</div>
</div>
<div id="ref-enwiki:1253473056" class="csl-entry" role="listitem">
<div class="csl-left-margin">[18] </div><div
class="csl-right-inline">Wikipedia contributors, <span>“Technical debt —
<span>Wikipedia</span><span>,</span> the free encyclopedia.”</span> <a
href="https://en.wikipedia.org/w/index.php?title=Technical_debt&amp;oldid=1253473056"
class="uri">https://en.wikipedia.org/w/index.php?title=Technical_debt&amp;oldid=1253473056</a>,
2024.</div>
</div>
<div id="ref-feathers2004working" class="csl-entry" role="listitem">
<div class="csl-left-margin">[19] </div><div class="csl-right-inline">M.
Feathers, <em>Working effectively with legacy code</em>. Prentice Hall
Professional, 2004.</div>
</div>
<div id="ref-enwiki:1251780629" class="csl-entry" role="listitem">
<div class="csl-left-margin">[20] </div><div
class="csl-right-inline">Wikipedia contributors, <span>“Smoke testing
(software) — <span>Wikipedia</span><span>,</span> the free
encyclopedia.”</span> <a
href="https://en.wikipedia.org/w/index.php?title=Smoke_testing_(software)&amp;oldid=1251780629"
class="uri">https://en.wikipedia.org/w/index.php?title=Smoke_testing_(software)&amp;oldid=1251780629</a>,
2024.</div>
</div>
<div id="ref-bach2002lessons" class="csl-entry" role="listitem">
<div class="csl-left-margin">[21] </div><div class="csl-right-inline">J.
Bach, B. Pettichord, and C. Kaner, <em>Lessons learned in software
testing: A context-driven approach</em>. John Wiley &amp; Sons,
2002.</div>
</div>
<div id="ref-hund2019pragmatic" class="csl-entry" role="listitem">
<div class="csl-left-margin">[22] </div><div class="csl-right-inline">A.
Hunt and D. Thomas, <em>The pragmatic programmer: From journeyman to
master</em>, 2nd ed. Boston, MA: Addison Wesley, 2019.</div>
</div>
</div>
</section>
    </div>
  </div>

  <script src="../assets/reveal.js-5.2.1//dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="../assets/reveal.js-5.2.1//plugin/notes/notes.js"></script>
  <script src="../assets/reveal.js-5.2.1//plugin/search/search.js"></script>
  <script src="../assets/reveal.js-5.2.1//plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: true,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'print',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script>
    // Reveal.destroy();
    // Reveal.initialize({
    //     verticator: {
    // 		color: '#181d37',
    // 	},
    // 	drawer: {
    //       toggleDrawKey: "d", // (optional) key to enable drawing, default "d"
    //       toggleBoardKey: "t", // (optional) key to show drawing board, default "t"
    //       colors: ["#fa1e0e", "#8ac926", "#1982c4", "#ffca3a"], // (optional) list of colors avaiable (hex color codes)
    //       color: "#FF0000", // (optional) color of a cursor, first color from `codes` is a default
    //       pathSize: 4, // (optional) path size in px, default 4
    //     },
    // 	// markdown: {
    //  //      smartypants: true,
    //  //    },
    //     // plugins: [ RevealMenu, Verticator ] 
    //     // plugins: [ RevealDrawer, RevealMenu, Verticator ] 
    // });
    // console.log(Reveal.hasPlugin('RevealMenu'));
    // Reveal.getPlugin('RevealMenu');
    // console.log(Reveal.hasPlugin('RevealMenu'));
    // Reveal.configure({ plugins: [ RevealDrawer, RevealMenu, Verticator ] });
    highlight_lines()
    </script>
    </body>
</html>
